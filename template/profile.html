{% extends 'base.html' %}
{% load static %}
{% block content %}
  <!--app-content open-->
            <div class="main-content app-content mt-0">
                <div class="side-app">

                    <!-- CONTAINER -->
                    <div class="main-container container-fluid">

                        <!-- PAGE-HEADER -->
                        <div class="page-header">
                            <h1 class="page-title">Profile View</h1>
                            
                        </div>
                        <!-- PAGE-HEADER END -->
 <!-- ROW-1 OPEN -->
                        <div class="row">
                            <div class="col-xl-4">
                                <div class="card">
                                    <div class="card-header">
                                        <div class="card-title">Profile</div>
                                    </div>
                                    <div class="card-body">
                                        <div class="text-center chat-image mb-5">
                                            <div class="avatar avatar-xxl chat-profile mb-3 brround">
                                                <a class="" href="{% url 'user_profile' %}"><img alt="avatar" src="{{ user.imageURL }}" class="brround"></a>
                                            </div>
                                            <div class="main-chat-msg-name">
                                                <a href="{% url 'user_profile' %}">
                                                    <h5 class="mb-1 text-dark fw-semibold">{{ user.first_name }} {{ user.last_name }}</h5>
                                                </a>
                                                <!-- <p class="text-muted mt-0 mb-0 pt-0 fs-13">KFWC</p> -->
                                            </div>
                                        </div>
                                        
                                </div>
                                
                            </div>
                            </div>
                            <div class="col-xl-8">
                                <div class="card">
                                    <div class="card-header">
                                        <h3 class="card-title">Edit Password</h3>
                                    </div>
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="form-group">
                                            <label class="form-label">Current Password</label>
                                            <div class="wrap-input100 validate-input input-group" id="Password-toggle">
                                                <a href="javascript:void(0)" class="input-group-text bg-white text-muted">
                                                    <i class="zmdi zmdi-eye text-white" aria-hidden="true"></i>
                                                </a>
                                                <input class="input100 form-control" type="password" id="current_password" placeholder="Current Password" autocomplete="current-password">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">New Password</label>
                                            <div class="wrap-input100 validate-input input-group" id="Password-toggle1">
                                                <a href="javascript:void(0)" class="input-group-text bg-white text-muted">
                                                    <i class="zmdi zmdi-eye text-white" aria-hidden="true"></i>
                                                </a>
                                                <input class="input100 form-control" type="password" id="new_password" placeholder="New Password" autocomplete="new-password">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Confirm Password</label>
                                            <div class="wrap-input100 validate-input input-group" id="Password-toggle2">
                                                <a href="javascript:void(0)" class="input-group-text bg-white text-muted">
                                                    <i class="zmdi zmdi-eye text-white" aria-hidden="true"></i>
                                                </a>
                                                <input class="input100 form-control" type="password" id="confirm_password" placeholder="Confirm Password" autocomplete="new-password">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card-footer text-end">
                                        <a class="btn btn-primary" id="update-password">Update</a>
                                        <a class="btn btn-danger" id="cancel-button">Cancel</a>
                                    </div>
                                </div>
                                        
                                       
                                    </div>
                                   
                                </div>
                                
                                
                            </div>
                        </div>
                        <!-- ROW-1 CLOSED -->



                    </div>
                    <!-- CONTAINER END -->
                </div>
            <!--app-content close-->
            <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

			<script>
                $(document).ready(function () {
                    $('#update-password').click(function () {
                        // Get the values of the input fields
                        var currentPassword = $('#current_password').val();
                        var newPassword = $('#new_password').val();
                        var confirmPassword = $('#confirm_password').val();
                
                        // Make an AJAX request to update the password
                        $.ajax({
                            type: 'POST',
                            url: '{% url "update_password" %}',
                            data: {
                                current_password: currentPassword,
                                new_password: newPassword,
                                confirm_password: confirmPassword
                            },
                            success: function (response) {
                                // Password updated successfully
                                alert(response.message);
                            },
                            error: function (xhr) {
                                // Handle errors and display error messages
                                alert(xhr.responseJSON.error);
                            }
                        });
                    });
                });

                </script>

                <script>
                    $(document).ready(function () {
                    $('#cancel-button').click(function () {
                        // Select the input fields and clear their values
                        $('#current_password').val('');
                        $('#new_password').val('');
                        $('#confirm_password').val('');
                    });
                });

                </script>
  <!-- <?php include("footer.php"); ?> -->
  {% endblock content %}
